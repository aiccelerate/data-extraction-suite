{
  "url": "https://aiccelerate.eu/feature-sets/pilot2_advanced_parkinson",
  "name": "pilot2_advanced_parkinson",
  "title": "Feature set for AICCELERATE pilot 2 - Predicting Advance Parkinson Disease",
  "description": "Feature set for Parkinson disease - Predicting progression to advance stage for Parkinson Disease",
  "version": "0.1",
  "date": "2022-04-21",
  "fhirVersion": "4.0.1",
  "publisher": "AICCELERATE WP1 Team (SRDC Corp.)",
  "referenceTimePoints": {
    "method": "feature-group"
  },
  "featureGroup": [
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/encounter",
      "filter": {
        "name": "mainVisit",
        "fhirPath": "type='225398001'"
      },
      "join": {"type": "past"},
      "feature": [
        {
          "name": "numOfMonthsSinceDiagnosis",
          "description": "Number of months passed from Parkinson diagnosis to current encounter",
          "valueExpr": {
            "fhirPath": "utl:getPeriod(%eligibilityEventTime, date, 'months')",
            "dataType": "integer"
          }
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/common/patient_demographics",
      "feature": [
        {
          "name": "gender"
        },
        {
          "name": "age",
          "description": "Age of the patient at reference point (examination)",
          "valueExpr": {
            "fhirPath": "utl:getPeriod(birthDate, %referenceTimePoint, 'years')",
            "dataType": "integer"
          }
        },
        {
          "name": "ageOfDiagnosis",
          "description": "Age when Parkinson is diagnosed first",
          "valueExpr": {
            "fhirPath": "utl:getPeriod(birthDate, %eligibilityEventTime, 'years')",
            "dataType": "integer"
          }
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/condition",
      "join": {"type": "past"},
      "filter": {
        "name": "motorSymptomsOnset",
        "fhirPath": "icd10Code='267082004'"
      },
      "feature": [
        {
          "name": "numOfMonthsSinceMotorSymptomsOnset",
          "description": "Number of months passed since onset of motor symptoms",
          "valueExpr": {
            "fhirPath": "utl:getPeriod(onsetDate, %referenceTimePoint, 'months')",
            "dataType": "integer"
          }
        },
        {
          "name": "numOfMonthsMotorSymptomsOnsetAfterDiagnosis",
          "description": "Number of months passed after diagnosis since onset of motor symptoms",
          "valueExpr": {
            "fhirPath": "utl:getPeriod(%eligibilityTime, onsetDate, 'months')",
            "dataType": "integer"
          }
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/condition",
      "join": {
        "type": "past"
      },
      "feature": [
        {
          "name": "icd10Code",
          "description": "Set of ICD-10 diagnosis for patients until that time point",
          "temporalAgg": [
            {
              "aggOp": ["set"]
            }
          ]
        },
        {
          "name": "icd10Code3Digits",
          "description": "Set of ICD-10 diagnosis (First 3 digits) for patients until that time point",
          "valueExpr": {
            "fhirPath": "icd10Code.substring(0,3)",
            "dataType": "code"
          },
          "temporalAgg": [
            {
              "aggOp": ["set"]
            }
          ]
        },
        {
          "name": "hasDementia",
          "description": "Whether patient has dementia or not until that time point. ICD-10 Codes: F00-F09, F10.73, G30, G31",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('F0') or icd10Code.startsWith('G30') or icd10Code.startsWith('G31') or icd10Code = 'F10.73'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasPsychosis",
          "description": "Whether patient has psychosis or not until that time point. ICD-10 Codes: F20-29, F10.59, F16.79, F31.2, F31.5, F32.3, F10.5, F11.5, F19.5",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('F2') or icd10Code = 'F10.59' or icd10Code = F16.79 or icd10Code.startsWith('F31.2') or icd10Code.startsWith('F31.5') or icd10Code.startsWith('F32.3') or icd10Code.startsWith('F10.5') or icd10Code.startsWith('F11.5') or icd10Code.startsWith('F19.5')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasOrthostaticHypotension",
          "description": "Whether patient has Orthostatic hypotension or not until that time point. ICD-10 Codes: I95.1",
          "valueExpr": {
            "fhirPath": "icd10Code = 'I95.1'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "dystonia",
          "description": "Whether patient has dystonia and number of cases until that time point. ICD-10 Codes: G24",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('G24')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasMyocardialInfarction",
          "description": "Whether patient has myocardial infarction or not until that time point. ICD-10 Codes:  I21.x, I22.x, I25.2",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I21') or icd10Code.startsWith('I22') or icd10Code='I25.2'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasCongestiveHeartFailure",
          "description": "Whether patient has congestive heart failure or not until that time point. ICD-10 Codes:  I09.9, I11.0, I13.0, I13.2, I25.5, I42.0, I42.5 - I42.9, I43.x, I50.x, P29.0",
          "valueExpr": {
            "fhirPath": "(icd10Code.exists() and icd10Code.subsetOf('I09.9' | 'I11.0' | 'I13.0' | 'I13.2' | 'I25.5' | 'I42.0' | 'P29.0')) or icd10Code.matches('I42\\.[5-9]') or icd10Code.startsWith('I43') or icd10Code.startsWith('I50')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasPeripheralVascularDisease",
          "description": "Whether patient has Peripheral vascular disease or not until that time point. ICD-10 Codes:  I70.x, I71.x, I73.1, I73.8, I73.9, I77.1, I79.0, I79.2, K55.1, K55.8, K55.9, Z95.8, Z95.9",
          "valueExpr": {
            "fhirPath": "(icd10Code.exists() and icd10Code.subsetOf('I73.1' | 'I73.8' | 'I73.9' | 'I77.1' | 'I79.0' | 'I79.2' | 'K55.1' | 'K55.8' | 'K55.9' | 'Z95.8' | 'Z95.9')) or icd10Code.startsWith('I70') or icd10Code.startsWith('I71')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasCerebrovascularDisease",
          "description": "Whether patient has Cerebrovascular disease (G45.x, G46.x, H34.0, I60.x - I69.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('G45') or icd10Code.startsWith('G46') or icd10Code = 'H34.0' or icd10Code.startsWith('I6')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasChronicPulmonaryDisease",
          "description": "Whether patient has Chronic pulmonary disease (I27.8, I27.9, J40.x - J47.x, J60.x - J67.x, J68.4, J70.1, J70.3)",
          "valueExpr": {
            "fhirPath": "icd10Code = 'I27.8' or icd10Code = 'I27.9' or icd10Code.matches('J4[0-7](\\..*)?') or icd10Code.matches('J6[0-7](\\..*)?') or icd10Code = 'J68.4' or icd10Code='J70.1' or icd10Code='J70.3'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasRheumatoidArthritisVascularDiseases",
          "description": "Whether patient has Rheumatoid arthritis/collagen vascular diseases (L94.0, L94.1, L94.3, M05.x, M06.x, M08.x, M12.0, M12.3, M30.x, M31.0 - M31.3, M32.x - M35.x, M45.x, M46.1, M46.8, M46.9)",
          "valueExpr": {
            "fhirPath": "(icd10Code.exists() and icd10Code.subsetOf('L94.0' | 'L94.1' | 'L94.3' | 'M12.0' | 'M12.3' | 'M46.1' | 'M46.8' | 'M46.9')) or icd10Code.startsWith('M05') or icd10Code.startsWith('M06') or icd10Code.startsWith('M08') or icd10Code.startsWith('M30') or icd10Code.matches('M31\\.[0-3]') or icd10Code.startsWith('M32') or icd10Code.startsWith('M33') or icd10Code.startsWith('M34') or icd10Code.startsWith('M35') or icd10Code.startsWith('M45')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasMildLiverDisease",
          "description": "Whether patient has Mild liver disease (B18.x, K70.0 - K70.3, K70.9, K71.3 - K71.5, K71.7, K73.x, K74.x, K76.0, K76.2 - K76.4, K76.8, K76.9, Z94.4)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('B18') or (icd10Code.exists() and icd10Code.subsetOf('K70.0' | 'K70.1' | 'K70.2' | 'K70.3' | 'K70.9' | 'K71.3' | 'K71.4' | 'K71.5' | 'K71.7' | 'K76.0' | 'K76.2' | 'K76.3' | 'K76.4' | 'K76.8' | 'K76.9' | 'Z94.4')) or icd10Code.startsWith('K73') or icd10Code.startsWith('K74')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasDiabetesWithoutChronicComplication",
          "description": "Whether patient has Diabetes without chronic complication (E10.0, E10.1, E10.6, E10.8, E10.9, E11.0, E11.1, E11.6, E11.8, E11.9, E12.0, E12.1, E12.6, E12.8, E12.9, E13.0, E13.1, E13.6, E13.8, E13.9, E14.0, E14.1, E14.6, E14.8, E14.9)",
          "valueExpr": {
            "fhirPath": "icd10Code.exists() and icd10Code.subsetOf('E10.0' | 'E10.1' | 'E10.6' | 'E10.8' | 'E10.9' | 'E11.0' | 'E11.1' | 'E11.6' | 'E11.8' | 'E11.9' | 'E12.0' | 'E12.1' | 'E12.6' | 'E12.8' | 'E12.9' | 'E13.0' | 'E13.1' | 'E13.6' | 'E13.8' | 'E13.9' | 'E14.0' | 'E14.1' | 'E14.6' | 'E14.8' | 'E14.9')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasDiabetesWithChronicComplication",
          "description": "Whether patient has Diabetes with chronic complication (E10.2 - E10.5, E10.7, E11.2 - E11.5, E11.7, E12.2 - E12.5, E12.7, E13.2 - E13.5, E13.7, E14.2 - E14.5, E14.7)",
          "valueExpr": {
            "fhirPath": "icd10Code.matches('E1[0-4]\\.[2-5]') or icd10Code.matches('E1[0-4]\\.7')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasHemiplegiaOrParaplegia",
          "description": "Whether patient has Hemiplegia or paraplegia (G04.1, G11.4, G80.1, G80.2, G81.x, G82.x, G83.0 - G83.4, G83.9)",
          "valueExpr": {
            "fhirPath": "(icd10Code.exists() and icd10Code.subsetOf('G04.1' | 'G11.4' | 'G80.1' | 'G80.2' | 'G83.9')) or icd10Code.startsWith('G81') or icd10Code.startsWith('G82') or icd10Code.matches('G83\\.[0-4]')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasRenalDisease",
          "description": "Whether patient has Renal disease (I12.0, I13.1, N03.2 - N03.7, N05.2 - N05.7, N18.x, N19.x, N25.0, Z49.0 - Z49.2, Z94.0, Z99.2)",
          "valueExpr": {
            "fhirPath": "(icd10Code.exists() and icd10Code.subsetOf('I12.0' | 'I13.1' | ' N25.0' | 'Z94.0' | 'Z99.2')) or icd10Code.matches('N03\\.[2-7]') or icd10Code.matches('N05\\.[2-7]') or icd10Code.startsWith('N18') or icd10Code.startsWith('N19') or icd10Code.matches('Z49\\.[0-2]')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasMalignancy",
          "description": "Whether patient has Any malignancy, including lymphoma and leukaemia, except malignant neoplasm of skin (C00.x - C26.x, C30.x - C34.x, C37.x - C41.x, C43.x, C45.x - C58.x, C60.x - C76.x, C81.x - C85.x, C88.x, C90.x - C97.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('C0') or icd10Code.startsWith('C1') or icd10Code.matches('C2[0-6](\\..*)?') or icd10Code.matches('C3[0-4](\\..*)?') or icd10Code.matches('C3[7-9](\\..*)?') or icd10Code.matches('C4[01356789](\\..*)?') or icd10Code.matches('C5[1-8](\\..*)?') or icd10Code.startsWith('C6') or icd10Code.matches('C7[0-6](\\..*)?') or icd10Code.matches('C8[0123458](\\..*)?') or icd10Code.matches('C9[0-7](\\..*)?')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasModerateOrSevereLiverDisease",
          "description": "Whether patient has Moderate or severe liver disease (I85.0, I85.9, I86.4, I98.2, K70.4, K71.1, K72.1, K72.9, K76.5, K76.6, K76.7)",
          "valueExpr": {
            "fhirPath": "icd10Code.exists() and icd10Code.subsetOf('I85.0' | 'I85.9' |  'I86.4' |  'I98.2' |  'K70.4' |  'K71.1' | 'K72.1' | 'K72.9' | 'K76.5' | 'K76.6' | 'K76.7')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasMetastaticSolidTumour",
          "description": "Whether patient has Metastatic solid tumour (C77.x - C80.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.matches('C7[7-9](\\..*)?') or icd10Code.startsWith('C80')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasSolidTumourWithoutMetastasis",
          "description": "Whether patient has Solid tumour without metastasis (C00.x - C26.x, C30.x - C34.x, C37.x - C41.x, C43.x, C45.x - C58.x, C60.x - C76.x, C97.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('C0') or icd10Code.startsWith('C1') or icd10Code.matches('C2[0-6](\\..*)?') or icd10Code.matches('C3[0-4](\\..*)?') or icd10Code.matches('C3[7-9](\\..*)?') or icd10Code.matches('C4[01356789](\\..*)?') or icd10Code.matches('C5[1-8](\\..*)?') or icd10Code.startsWith('C6') or icd10Code.matches('C7[0-6](\\..*)?') or icd10Code.startsWith('C97')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasCoagulopathy",
          "description": "Whether patient has Coagulopathy (D65 - D68.x, D69.1, D69.3 - D69.6)",
          "valueExpr": {
            "fhirPath": "icd10Code.matches('D6[5-8](\\..*)?') or icd10Code.matches('D69\\.[3-6]') or icd10Code = 'D69.1'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasHiv",
          "description": "Whether patient has AIDS/HIV (B20.x - B22.x, B24.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.matches('B2[0-2](\\..*)?') or icd10Code.startsWith('B24')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasHypothyroidism",
          "description": "Whether patient has Hypothyroidism (E00.x - E03.x, E89.0)",
          "valueExpr": {
            "fhirPath": "icd10Code.matches('E0[0-2](\\..*)?') or icd10Code = 'E89.0'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasHypertensionComplicated",
          "description": "Whether patient has Hypertension, complicated (I10.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I10')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasHypertensionUncomplicated",
          "description": "Whether patient has Hypertension, uncomplicated (I11.x - I13.x, I15.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.matches('I1[1-3](\\..*)?') or icd10Code.startsWith('I15')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasObesity",
          "description": "Whether patient has Obesity (E66.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('E66')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasDepression",
          "description": "Whether patient has Depression (F20.4, F31.3 - F31.5, F32.x, F33.x, F34.1, F41.2, F43.2)",
          "valueExpr": {
            "fhirPath": "(icd10Code.exists() and icd10Code.subsetOf('F20.4' | 'F34.1' | 'F41.2' | 'F43.2')) or icd10Code.matches('F1[3-5](\\..*)?') or icd10Code.startsWith('F32') or icd10Code.startsWith('F33')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/condition",
      "join": {
        "type": "past",
        "duration": "12mo"
      },
      "feature": [
        {
          "name": "traumas",
          "description": "Whether patient has trauma and number of traumas until that time point. ICD-10 Codes: S00-S99, T00-T14",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('S') or icd10Code.startsWith('T0') or icd10Code.startsWith('T11') or icd10Code.startsWith('T12') or icd10Code.startsWith('T13') or icd10Code.startsWith('T14')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "falls",
          "description": "Whether patient has fall and number of falls until that time point. ICD-10 Codes: W00-W19",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('W0') or icd10Code.startsWith('W1')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "fractures",
          "description": "Whether patient has fracture and number of fracture until that time point. ICD-10 Codes: S02, S12, S22, S32, S42, S52, S62, S72, S82, S92",
          "valueExpr": {
            "fhirPath": "icd10Code.exists() and icd10Code.substring(0,2).subsetOf(S02 | S12 | S22 | S32 | S42 | S52 | S62 | S72 | S82 | S92)",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasPepticUlcerDisease",
          "description": "Whether patient has Peptic ulcer disease (K25.x - K28.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.matches('K2[5-8](\\..*)?')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasFluidAndElectrolyteDisorders",
          "description": "Whether patient has Fluid and electrolyte disorders (E22.2, E86.x, E87.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('E86') or icd10Code.startsWith('E87') or icd10Code = 'E22.2'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasDeficiencyAnaemia",
          "description": "Whether patient has Deficiency anaemia (D50.8, D50.9, D51.x - D53.x)",
          "valueExpr": {
            "fhirPath": "icd10Code.matches('D5[1-3](\\..*)?') or icd10Code.matches('D50\\.[8-9]')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/condition",
      "join": {
        "type": "past",
        "duration": "5a"
      },
      "feature": [
        {
          "name": "hasAlcoholAbuse",
          "description": "Whether patient has Alcohol abuse (F10, E52, G62.1, I42.6, K29.2, K70.0, K70.3, K70.9, T51.x, Z50.2, Z71.4, Z72.1)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('F10') or (icd10Code.exists() and icd10Code.subsetOf('E52' | 'G62.1' | 'I42.6' | 'K29.2' | 'K70.0' | 'K70.3' | 'K70.9' | 'Z50.2' | 'Z71.4' | 'Z72.1')) or icd10Code.startsWith('T51')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasDrugAbuse",
          "description": "Whether patient has Drug abuse (F11.x - F16.x, F18.x, F19.x, Z71.5, Z72.2)",
          "valueExpr": {
            "fhirPath": "(icd10Code.exists() and icd10Code.subsetOf('Z71.5' | 'Z72.2')) or icd10Code.matches('F1[12345689](\\..*)?')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },

    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "MMSE",
        "description": "MMSE total score",
        "fhirPath": "code='72106-8'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "MoCA",
        "description": "MoCA total score",
        "fhirPath": "code='72172-0'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "PD_CFRS",
        "description": "PD-CFRS total score",
        "fhirPath": "code='pd-cfrs'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "PD_MCI",
        "description": "PD-MCI total score",
        "fhirPath": "code='pd-mci'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last assessment score within the period",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "description": "Last assessment score within the period",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "PDQ_39",
        "description": "PDQ-39 total score",
        "fhirPath": "code='pdq-39'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last assessment score within the period",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "description": "Last assessment score within the period",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "hoehn_yahr",
        "description": "Modified Hoehn & Yahr scale",
        "fhirPath": "code='77714-4'"
      },
      "join": {
        "type": "past"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last assessment score within the period"
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "ADL",
        "description": "Activity of Daily Living (ADL) Katz scale",
        "fhirPath": "code='273547007'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last assessment score within the period",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "iADL",
        "description": "Instrumental Activity of Daily Living (ADL) scale",
        "fhirPath": "code='273534002'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "scoreScaled",
          "description": "Last assessment score within the period",
          "windowFunc": ["delta","rate"]
        }
      ]
    },

    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "apathy",
        "description": "Assessments regarding apathy",
        "fhirPath": "concept='apathy'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "scoreScaled",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "anxiety",
        "description": "Assessments regarding anxiety",
        "fhirPath": "concept='anxiety'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "scoreScaled",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "depression",
        "description": "Assessments regarding depression",
        "fhirPath": "concept='depression'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "scoreScaled",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "impulsivity",
        "description": "Assessments regarding impulsivity",
        "fhirPath": "concept='impulsivity'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "scoreScaled",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "gambling",
        "description": "Assessments regarding depression",
        "fhirPath": "concept='gambling'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "scoreScaled",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "impulsive_compulsiveness",
        "description": "Assessments regarding impulsive compulsiveness",
        "fhirPath": "concept='impulsive_compulsiveness'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "scoreScaled",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "psychopathology",
        "description": "Assessments regarding psychiatric problems",
        "fhirPath": "concept='psychopathology'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "scoreScaled",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "attention",
        "description": "Assessments regarding attentive domain of cognition",
        "fhirPath": "concept='attention'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "temporalAgg": [
            {
              "aggOp": ["avg"]
            }
          ],
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "executive",
        "description": "Assessments regarding executive domain of cognition",
        "fhirPath": "concept='executive'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "temporalAgg": [
            {
              "aggOp": ["avg"]
            }
          ],
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "visuospatial",
        "description": "Assessments regarding visuospatial domain of cognition",
        "fhirPath": "concept='visuospatial'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "temporalAgg": [
            {
              "aggOp": ["avg"]
            }
          ],
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "memory",
        "description": "Assessments regarding memory domain of cognition",
        "fhirPath": "concept='memory'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "temporalAgg": [
            {
              "aggOp": ["avg"]
            }
          ],
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "language",
        "description": "Assessments regarding language domain of cognition",
        "fhirPath": "concept='language'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "temporalAgg": [
            {
              "aggOp": ["avg"]
            }
          ],
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "vascular_degeneration",
        "description": "Assessments regarding vascular degeneration",
        "fhirPath": "concept='vascular_degeneration'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "atrophy",
        "description": "Assessments regarding atrophy",
        "fhirPath": "concept='atrophy'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/other",
      "filter": {
        "name": "impairedCognition",
        "description": "Existence of impaired cognition",
        "fhirPath": "concept='cognition'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "problemExists",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },

    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/motor",
      "filter": {
        "name": "onState",
        "description": "Motor symptoms during on state of Parkinson",
        "fhirPath": "isOnState"
      },
      "pivot": {
        "name": "code",
        "description": "Motor symptoms evaluated as both numeric and boolean features (Symptom code in SNOMED-CT or custom)",
        "values": [
          {
            "name":"tremor",
            "value": "26079004"
          },
          {
            "name":"dyskinesia",
            "value": "9748009"
          },
          {
            "name":"freezing_of_gait",
            "value": "443544006"
          },
          {
            "name":"postural_balance",
            "value": "416240000"
          },
          {
            "name":"bradykinesia",
            "value": "399317006"
          },
          {
            "name":"stiffness_rigidity",
            "value": "271587009"
          },
          {
            "name":"dystonia",
            "value": "15802004"
          },
          {
            "name":"off_time",
            "value": "off-time"
          },
          {
            "name":"fluctuations",
            "value": "fluctuations"
          }
        ]
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last symptom score within the period.",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "description": "Last symptom score (scaled) within the period.",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "isSeen",
          "description": "Whether symptom seen within the period.",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/motor",
      "filter": {
        "name": "offState",
        "description": "Motor symptoms during off state of Parkinson",
        "fhirPath": "isOnState.not()"
      },
      "pivot": {
        "name": "code",
        "description": "Motor symptoms evaluated as both numeric and boolean features (Symptom code in SNOMED-CT or custom)",
        "values": [
          {
            "name":"tremor",
            "value": "26079004"
          },
          {
            "name":"dyskinesia",
            "value": "9748009"
          },
          {
            "name":"freezing_of_gait",
            "value": "443544006"
          },
          {
            "name":"postural_balance",
            "value": "416240000"
          },
          {
            "name":"bradykinesia",
            "value": "399317006"
          },
          {
            "name":"stiffness_rigidity",
            "value": "271587009"
          },
          {
            "name":"dystonia",
            "value": "15802004"
          },
          {
            "name":"off_time",
            "value": "off-time"
          },
          {
            "name":"fluctuations",
            "value": "fluctuations"
          }
        ]
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last symptom score within the period.",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "description": "Last symptom score (scaled) within the period.",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "isSeen",
          "description": "Whether symptom seen within the period.",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/motor",
      "filter": {
        "name": "wearingOff",
        "description": "Existence of wearing off",
        "fhirPath": "code='427488005'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "isSeen",
          "description": "Whether symptom seen within the period.",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/motor",
      "filter": {
        "name": "updrs3On",
        "description": "UPDRS Part 3 Total Score during on state",
        "fhirPath": "isOnState and code='77720-1'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last symptom score within the period.",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "description": "Last symptom score (scaled) within the period.",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/motor",
      "filter": {
        "name": "updrs3Off",
        "description": "UPDRS Part 3 Total Score during off state",
        "fhirPath": "isOnState.not() and code='77720-1'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last symptom score within the period.",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "description": "Last symptom score (scaled) within the period.",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/motor",
      "filter": {
        "name": "updrs4On",
        "description": "UPDRS Part 4 Total Score during on state",
        "fhirPath": "isOnState and code='77721-9'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last symptom score within the period.",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "description": "Last symptom score (scaled) within the period.",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/motor",
      "filter": {
        "name": "updrs4Off",
        "description": "UPDRS Part 4 Total Score during off state",
        "fhirPath": "isOnState.not() and code='77721-9'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last symptom score within the period.",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "description": "Last symptom score (scaled) within the period.",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/motor",
      "filter": {
        "name": "advanceSymptoms",
        "description": "Motor symptoms (dyskinesia, off-time, fluctuations) that may indicate advance disease state in parkinson",
        "fhirPath": "code='9748009' or code='off-time' or code='fluctuations'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "isSeen",
          "description": "Whether any advance symptom seen within the period.",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },

    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/nonmotor",
      "pivot": {
        "name": "code",
        "description": "Non motor symptoms evaluated as numeric features (Symptom code in SNOMED-CT or custom)",
        "values": [
          {
            "name":"sleep_disorder",
            "value": "39898005"
          },
          {
            "name":"daytime_sleepiness",
            "value": "713567005"
          },
          {
            "name":"dizziness",
            "value": "404640003"
          },
          {
            "name":"sweating",
            "value": "415690000"
          },
          {
            "name":"nocturia",
            "value": "139394000"
          },
          {
            "name":"nausea",
            "value": "422587007"
          },
          {
            "name":"constipation",
            "value": "14760008"
          },
          {
            "name":"pain",
            "value": "22253000"
          }
        ]
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last symptom score within the period",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "description": "Last symptom score (scaled) within the period.",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "isSeen",
          "description": "Whether symptom seen within the period",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/nonmotor",
      "filter": {
        "name": "scale",
        "description": "Non-motor symptom evaluation(MDS-NMS or MDS-NMSS)",
        "fhirPath": "code='non-motor-symptoms'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "score",
          "description": "Last symptom score within the period",
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "scoreScaled",
          "description": "Last symptom score (scaled) within the period.",
          "windowFunc": ["delta","rate"]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/nonmotor",
      "filter": {
        "name": "speechDisorder",
        "description": "Existence of speech disorder",
        "fhirPath": "code='286366005'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "isSeen",
          "description": "Whether symptom seen within the period",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/nonmotor",
      "filter": {
        "name": "orthocasticHypotension",
        "description": "Existence of Orthocastic Hypotension",
        "fhirPath": "code='28651003'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "isSeen",
          "description": "Whether symptom seen within the period",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/nonmotor",
      "filter": {
        "name": "hallucination",
        "description": "Existence of hallucinations",
        "fhirPath": "code='7011001'"
      },
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "isSeen",
          "description": "Whether symptom seen within the period",
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },

    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/medication",
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "feature": [
        {
          "name": "atcCode",
          "description": "Set of ATC code of medications that patient has taken for last 6 months",
          "temporalAgg": [
            {
              "aggOp": [
                "set"
              ]
            }
          ]
        },
        {
          "name": "atcCodeWith4Digits",
          "description": "Set of ATC code (first 4 digits) of medications that patient has taken for last 6 months",
          "valueExpr": {
            "fhirPath": "atcCode.substring(0,4)",
            "dataType": "code"
          },
          "temporalAgg": [
            {
              "aggOp": [
                "set"
              ]
            }
          ]
        },
        {
          "name": "hasOtherParkinsonMedication",
          "description": "Whether patient has other parkinson medication or not within this period. ATC Code: under N04B",
          "valueExpr": {
            "fhirPath": "atcCode.startsWith('N04B')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasDopamineAgonist",
          "description": "Whether patient has dopamine agonist or not within this period. ATC Code: under N04BC",
          "valueExpr": {
            "fhirPath": "atcCode.startsWith('N04BC')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasBenzodiazepinesRecently",
          "description": "Whether patient has benzodiazepines or not within this period. ATC Code: under N05CD",
          "valueExpr": {
            "fhirPath": "atcCode.startsWith('N05CD')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/medication",
      "join": {
        "type": "past",
        "duration": "3mo"
      },
      "feature": [
        {
          "name": "hasAnticholinesteraseInhibitorsRecently",
          "description": "Whether patient has anticholinesterase inhibitors or not within this period. ATC Code: under under N06DA",
          "valueExpr": {
            "fhirPath": "atcCode.startsWith('N06DA')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasPainkillersRecently",
          "description": "Whether patient has painkillers or not within this period. ATC Code: under under N02",
          "valueExpr": {
            "fhirPath": "atcCode.startsWith('N02')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasConstipationMedicationRecently",
          "description": "Whether patient has constipation medication or not within this period. ATC Code: under under A06A",
          "valueExpr": {
            "fhirPath": "atcCode.startsWith('A06A')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/medication",
      "join": {
        "type": "past",
        "duration": "12mo"
      },
      "feature": [
        {
          "name": "hasAntidepressantLastYear",
          "description": "Whether patient has antidepressant or not within this period. ATC Code: N06AA,N06AB,N06AF,N06AG,N06AX",
          "valueExpr": {
            "fhirPath": "atcCode.substring(0,5).subsetOf('N06AA' | 'N06AB' | 'N06AF' | 'N06AG' | 'N06AX')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hasAntipsychoticsLastYear",
          "description": "Whether patient has antipsychotics or not within this period. ATC Code: under under N05A",
          "valueExpr": {
            "fhirPath": "atcCode.startsWith('N05A')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/levodopa",
      "join": {
        "type": "past",
        "duration": "6mo"
      },
      "temporalGrouping": "d",
      "feature": [
        {
          "name": "frequency_d_sum",
          "temporalAgg": [
            {
              "aggOp": ["last", "avg"]
            }
          ],
          "windowFunc": ["delta","rate"]
        },
        {
          "name": "5OrMore",
          "description": "Whether levodopa is used 5 times or more within a day in this period",
          "valueExpr": {
            "fhirPath": "frequency_d_sum > 4",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "dose_d_sum",
          "temporalAgg": [
            {
              "aggOp": ["last", "avg"]
            }
          ],
          "windowFunc": ["delta","rate"]
        }
      ]
    },

    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/device",
      "join": {
        "type": "past"
      },
      "feature": [
        {
          "name": "treatment",
          "description": "Whether any advance parkinson device is started to be used in this period",
          "valueExpr": {
            "fhirPath": "code.exists()",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "deepBrainStimulator",
          "description": "Whether deep brain stimulator device is started to be used in this period",
          "valueExpr": {
            "fhirPath": "code='deep-brain-stimulator'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "levodopaInfusionPumpUsed",
          "description": "Whether Levodopa infusion pump device is started to be used in this period",
          "valueExpr": {
            "fhirPath": "code='levodopa-infusion-pump'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "apomorphinePumpUsed",
          "description": "Whether Apomorphine pump device is started to be used in this period",
          "valueExpr": {
            "fhirPath": "code='apomorfine-pump'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },

    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/encounter",
      "join": {
        "type": "past",
        "duration": "12mo"
      },
      "feature": [
        {
          "name": "numOfVisits",
          "description": "Number of total hospital visits for this period",
          "valueExpr": {
            "fhirPath": "category",
            "dataType": "code"
          },
          "temporalAgg": [
            {
              "aggOp": ["count"]
            }
          ]
        },
        {
          "name": "numOfEmergencyVisits",
          "description": "Number of Emergency visits for this period",
          "valueExpr": {
            "fhirPath": "category='EMER'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["count_true"]
            }
          ]
        },
        {
          "name": "numOfNeurologicalVisits",
          "description": "Number of contacts to neurology department/year",
          "valueExpr": {
            "fhirPath": "type='307808008' or type='225398001'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["count_true"]
            }
          ]
        },
        {
          "name": "lengthOfStay",
          "description": "Number of days patient stay in hospital for this period",
          "temporalAgg": [
            {
              "aggOp": ["sum"]
            }
          ]
        }
      ]
    },

    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/levodopa",
      "join": {
        "type": "future"
      },
      "temporalGrouping": "d",
      "feature": [
        {
          "name": "5OrMore",
          "description": "Whether levodopa is used 5 times or more within a day in next period",
          "valueExpr": {
            "fhirPath": "frequency_d_sum > 4",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "lastN": 4,
              "windowPeriod": "mo",
              "windowSize": 6,
              "extending": "multiplicative",
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/motor",
      "filter": {
        "name": "advanceSymptoms",
        "description": "Motor symptoms (dyskinesia, off-time, fluctuations) that may indicate advance disease state in parkinson",
        "fhirPath": "code='9748009' or code='off-time' or code='fluctuations'",
        "applyPivoting": false
      },
      "join": {
        "type": "future"
      },
      "feature": [
        {
          "name": "isSeen",
          "description": "Whether symptom seen within the period.",
          "temporalAgg": [
            {
              "lastN": 4,
              "windowPeriod": "mo",
              "windowSize": 6,
              "extending": "multiplicative",
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/condition",
      "join": {
        "type": "future"
      },
      "feature": [
        {
          "name": "hasDementia",
          "description": "Whether patient has diagnosed dementia or not in next period. ICD-10 Codes: F00-F09, F10.73, G30, G31",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('F0') or icd10Code.startsWith('G30') or icd10Code.startsWith('G31') or icd10Code = 'F10.73'",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "lastN": 4,
              "windowPeriod": "mo",
              "windowSize": 6,
              "extending": "multiplicative",
              "aggOp": [
                "any"
              ]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://aiccelerate.eu/feature-groups/pilot2/medication",
      "join": {
        "type": "future"
      },
      "feature": [
        {
          "name": "hasAnticholinesteraseInhibitors",
          "description": "Whether patient has anticholinesterase inhibitors or memantine within next period. ATC Code: under under N06DA or N06DX",
          "valueExpr": {
            "fhirPath": "atcCode.startsWith('N06DA') or atcCode.startsWith('N06DX')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "lastN": 4,
              "windowPeriod": "mo",
              "windowSize": 6,
              "extending": "multiplicative",
              "aggOp": [
                "any"
              ]
            }
          ]
        }
      ]
    }
  ],
  "combinedFeature": [
    {
      "name": "inAdvancedStage",
      "description": "Whether patient is within advance stage of Parkinson (modified delphi criteria) in this period",
      "isOutcome": false,
      "combinedFeatures": [
        {
          "alias": "deviceAidedTreatment",
          "featureNamePattern": "device_treatment_any"
        },
        {
          "alias": "usingLevodopa5OrMore",
          "featureNamePattern": "levodopa_5OrMore_p6mo_any"
        },
        {
          "alias": "advanceSymptoms",
          "featureNamePattern": "motor_advanceSymptoms_isSeen_p6mo_any"
        },
        {
          "alias": "hasDementia",
          "featureNamePattern": "condition_hasDementia_any"
        }
      ],
      "valueExpr": {
        "fhirPath": "deviceAidedTreatment or (usingLevodopa5OrMore and (advanceSymptoms or hasDementia))",
        "dataType": "boolean"
      }
    },
    {
      "name": "inAdvancedStage",
      "description": "Whether patient is passed to the advance stage of Parkinson (modified delphi criteria) in next period",
      "isOutcome": true,
      "combinedFeatures": [
        {
          "alias": "alreadyInAdvanceStage",
          "featureNamePattern": "inAdvancedStage"
        },
        {
          "alias": "usingLevodopa5OrMore",
          "featureNamePattern": "levodopa_5OrMore_*"
        },
        {
          "alias": "advanceSymptoms",
          "featureNamePattern": "motor_advanceSymptoms_isSeen_*"
        },
        {
          "alias": "hasDementia",
          "featureNamePattern": "condition_hasDementia_*"
        }
      ],
      "valueExpr": {
        "fhirPath": "alreadyInAdvanceStage.not() and (usingLevodopa5OrMore and (advanceSymptoms or hasDementia))",
        "dataType": "boolean"
      }
    }
  ]
}
